<%#
This file is part of the doubledog-mirrmaid Puppet module.
Copyright 2018 John Florian
SPDX-License-Identifier: GPL-3.0-or-later
-%>
#
# mirrmaid configuration for "<%= @name %>" mirror on <%= @fqdn %>
#
# WARNING:
#   This file is managed by Puppet via the "<%= @module_name %>" module.


[MIRRMAID]

summary_group: <%= @name %>
<% if @summary_history_count -%>
summary_history_count: <%= @summary_history_count %>
<% end -%>
<% if @summary_interval -%>
summary_interval: <%= @summary_interval %>
<% end -%>
<% if @summary_recipients -%>
summary_recipients: [<%= @summary_recipients.map { |e| "'#{e}'" }.join(', ') %>]
<% end -%>
<% if @summary_size -%>
summary_size: <%= @summary_size %>
<% end -%>


[DEFAULT]

rsync_options: [
<%= @rsync_options.map { |e| "    '#{e}'" }.join(",\n") %>
    ]

[MIRRORS]

enabled: [
<%= @branches.keys.map { |e| "    '#{e}'" }.join(",\n") %>
    ]
